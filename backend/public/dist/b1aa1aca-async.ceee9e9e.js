(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["b1aa1aca"],{"0830b990":function(e,a,t){t.d(a,"__esModule",{value:!0}),t.e(a,{default:function(){return X;}});var l=t("777fffbe"),n=t("852bbaa9"),r=t("1c0135da"),d=t("ea4234f3"),s=t("83916a63"),i=t("001c8eca"),o=t("ac95773d"),u=t("c8ea7ff5"),c=l._(u),h=t("9130e84e"),f=l._(h),m=t("58816e9f"),p=l._(m),x=t("f796ae67"),b=l._(x),j=t("99e5d786"),g=l._(j),C=t("861fc6a1"),v=l._(C),w=t("b7441d7d"),y=n._(w),S=t("8666f4b8"),P=t("eb5c3912"),_=t("ec0a8ea3"),I=t("d0ded34d"),T=l._(I),k=t("ca26ff16"),N=l._(k),M=t("1edce643"),D=t("d2d23e5a"),A=l._(D);let Y=e=>{let{createModalVisible:a,onSubmit:t,onCancel:l}=e,n=(0,o.useIntl)();return(0,r.jsxs)(M.DrawerForm,{title:n.formatMessage({id:"pages.form.metafields.new",defaultMessage:"Th\xeam kh\xe1ch m\u1EDDi"}),width:600,open:a,onFinish:t,drawerProps:{onClose:l,destroyOnClose:!0},grid:!0,initialValues:{description:"",key:"",namespace:"",value:""},children:[(0,r.jsx)(A.default,{colProps:{span:24},name:"idNumber",label:"S\u1ED1 CCCD"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"phoneNumber",label:"\u0110i\u1EC7n tho\u1EA1i"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"email",label:"Email"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"fullName",label:"T\xean"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"office",label:"Ch\u1EE9c v\u1EE5"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"workplace",label:"\u0110\u01A1n v\u1ECB"})]});};var R=t("29da91cd"),V=l._(R),F=t("6c336637"),z=t("9bb64d19"),H=l._(z);let E=({onSubmit:e,onCancel:a,updateModalVisible:t,values:l,...n})=>((0,o.useIntl)(),(0,r.jsxs)(M.DrawerForm,{title:[l.fullName,l.idNumber].join(" "),width:600,open:t,onFinish:e,drawerProps:{onClose:a,destroyOnClose:!0},initialValues:l,children:[(0,r.jsx)(H.default,{justify:"center",children:(0,r.jsx)(V.default,{size:256,src:(0,F.getPhotoURL)(l.idNumber+".jpg"),icon:(0,r.jsx)(N.default,{})})}),(0,r.jsx)(A.default,{colProps:{span:24},name:"idNumber",label:"S\u1ED1 CCCD"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"phoneNumber",label:"\u0110i\u1EC7n tho\u1EA1i"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"email",label:"Email"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"fullName",label:"T\xean"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"office",label:"Ch\u1EE9c v\u1EE5"}),(0,r.jsx)(A.default,{colProps:{span:24},name:"workplace",label:"\u0110\u01A1n v\u1ECB"})]})),G=async e=>{let a=p.default.loading("\u0110ang x\u1EED l\xfd");try{return await (0,P.addGuest)({...e}),a(),p.default.success("\u0110\xe3 th\xeam th\xe0nh c\xf4ng"),!0;}catch(e){return a(),p.default.error("Vui l\xf2ng th\u1EED l\u1EA1i!"),!1;}},O=async(e,a)=>{let t=p.default.loading("\u0110ang x\u1EED l\xfd");try{return await (0,P.updateGuest)({...a,...e}),t(),p.default.success("C\u1EADp nh\u1EADt th\xe0nh c\xf4ng"),!0;}catch(e){return t(),p.default.error("Vui l\xf2ng th\u1EED l\u1EA1i!"),!1;}},U=async e=>{let a=p.default.loading("\u0110ang x\u1EED l\xfd");if(!e)return!0;try{return await (0,P.removeGuests)({ids:e.map(e=>e._id)}),a(),p.default.success("X\xf3a th\xe0nh c\xf4ng!"),!0;}catch(e){return a(),p.default.error("Vui l\xf2ng th\u1EED l\u1EA1i!"),!1;}},X=()=>{let[e,a]=(0,y.useState)(!1),[t,l]=(0,y.useState)(!1),[n,u]=(0,y.useState)(!1),h=(0,y.useRef)(),[m,p]=(0,y.useState)(),[x,j]=(0,y.useState)([]),[C,w]=(0,y.useState)({width:{show:!1},height:{show:!1},alt:{show:!1}});(0,o.useIntl)();let{getMediaUrl:I}=(0,S.useServiceProviders)(),k=[{title:"S\u1ED1 CCCD",dataIndex:"idNumber",sorter:!0,render:(e,a)=>(0,r.jsxs)(g.default,{children:[(0,r.jsx)(c.default,{src:(0,F.getPhotoURL)(a.idNumber+".jpg"),icon:(0,r.jsx)(N.default,{})}),(0,r.jsx)("a",{onClick:()=>{l(!0),p(a);},children:e})]})},{title:"\u0110i\u1EC7n tho\u1EA1i",dataIndex:"phoneNumber",sorter:!0},{title:"Email",dataIndex:"email",sorter:!0},{title:"T\xean",dataIndex:"fullName",sorter:!0},{title:"Ch\u1EE9c v\u1EE5",dataIndex:"office",sorter:!0},{title:"\u0110\u01A1n v\u1ECB",dataIndex:"workplace",sorter:!0},{title:"Created At",dataIndex:"createdAt",render:(e,a)=>(0,r.jsx)(g.default,{children:(0,v.default)(a.createdAt).format("DD MMM YYYY HH:mm")}),hideInTable:!0,hideInSearch:!0},{title:"Updated At",dataIndex:"updatedAt",render:(e,a)=>(0,r.jsx)(g.default,{children:(0,v.default)(a.updatedAt).format("DD MMM YYYY HH:mm")}),hideInTable:!0,hideInSearch:!0},{title:"Thao t\xe1c",dataIndex:"option",valueType:"option",render:(e,a)=>[(0,r.jsx)("a",{onClick:()=>{l(!0),p(a);},children:"S\u1EEDa"},"edit"),(0,r.jsx)(b.default,{title:"Ch\u1EAFc ch\u1EAFn?",onConfirm:async()=>{var e,t;await U([a]),j([]),null===(t=h.current)||void 0===t||null===(e=t.reloadAndRest)||void 0===e||e.call(t);},children:(0,r.jsx)("a",{children:"X\xf3a"})},"delete")]}];return(0,r.jsxs)(s.PageContainer,{children:[(0,r.jsx)(i.ProTable,{columnsState:(0,_.tableColumnState)("guest",C,w),headerTitle:"Danh s\xe1ch",actionRef:h,rowKey:"_id",search:{labelWidth:120},pagination:{showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:20,pageSizeOptions:[20,50,100,200]},toolBarRender:()=>[(0,r.jsxs)(f.default,{type:"primary",onClick:()=>{a(!0);},children:[(0,r.jsx)(T.default,{})," T\u1EA1o m\u1EDBi"]},"primary")],request:P.guests,columns:k,rowSelection:{onChange:(e,a)=>{j(a);}}}),(null==x?void 0:x.length)>0&&(0,r.jsx)(d.FooterToolbar,{extra:(0,r.jsxs)("div",{children:["Selected\xa0",(0,r.jsx)("a",{style:{fontWeight:600},children:x.length}),"\xa0 items"]}),children:(0,r.jsx)(b.default,{title:"Ch\u1EAFc ch\u1EAFn?",onConfirm:async()=>{var e,a;await U(x),j([]),null===(a=h.current)||void 0===a||null===(e=a.reloadAndRest)||void 0===e||e.call(a);},children:(0,r.jsx)(f.default,{children:"X\xf3a nhi\u1EC1u d\xf2ng"})},"delete")}),(0,r.jsx)(Y,{createModalVisible:e,onSubmit:async e=>{await G(e)&&(a(!1),h.current&&h.current.reload());},onCancel:()=>{a(!1),p(void 0),u(!1);}}),(0,r.jsx)(E,{onSubmit:async e=>{await O(e,m)&&(l(!1),p(void 0),u(!1),h.current&&h.current.reload());},onCancel:()=>{l(!1),p(void 0),u(!1);},updateModalVisible:t,values:m||{}})]});};}}]);
//# sourceMappingURL=b1aa1aca-async.ceee9e9e.js.map