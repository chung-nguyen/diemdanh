"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{31679:function(x,j,e){e.r(j);var S=e(15009),u=e.n(S),L=e(99289),P=e.n(L),B=e(5574),v=e.n(B),M=e(6110),U=e(62218),b=e(10293),W=e(42075),t=e(2453),i=e(26412),m=e(28036),l=e(27484),E=e.n(l),I=e(67294),y=e(40349),T=e(85576),r=e(20048),c=e(60219),d=e(98169),p=e(85893),a=function(){var s=(0,I.useRef)(),o=(0,I.useState)([]),g=v()(o,2),n=g[0],$=g[1],H=(0,I.useState)({width:{show:!1},height:{show:!1},alt:{show:!1}}),K=v()(H,2),Q=K[0],V=K[1],ae=(0,b.useIntl)(),X=new URLSearchParams(b.history.location.search),k=String(X.get("id")),Z=(0,b.useQuery)(["meeting-report",k],function(){return(0,T.vI)(k)},{enabled:!!k}),G=Z.data,q=Z.isLoading,z=G||{},A=z.meeting,F=z.attendances,Y=(0,I.useMemo)(function(){return(F==null?void 0:F.length)||0},[G]),J=(0,I.useMemo)(function(){return(F||[]).filter(function(C){return C.status===d.H8.CHECKED_IN}).length},[G]),ee=[{title:"T\xEAn kh\xE1ch m\u1EDDi",dataIndex:"guestId",sorter:!0,render:function(R,D){var f;return(0,p.jsx)("span",{children:(f=D.guestId)===null||f===void 0?void 0:f.fullName})}},{title:"S\u1ED1 \u0110T",dataIndex:"guestId",sorter:!0,render:function(R,D){var f;return(f=D.guestId)===null||f===void 0?void 0:f.phoneNumber}},{title:"Ch\u1EE9c v\u1EE5",dataIndex:"guestId",sorter:!0,render:function(R,D){var f;return(f=D.guestId)===null||f===void 0?void 0:f.office}},{title:"\u0110\u01A1n v\u1ECB",dataIndex:"guestId",sorter:!0,render:function(R,D){var f;return(f=D.guestId)===null||f===void 0?void 0:f.workplace}},{title:"T\xECnh tr\u1EA1ng",dataIndex:"status",sorter:!0,render:function(R,D){var f;return(0,p.jsx)("span",{children:(f=d.RA.find(function(w){return w.value===D.status}))===null||f===void 0?void 0:f.label})}},{title:"Th\u1EDDi \u0111i\u1EC3m",dataIndex:"time",render:function(R,D){return(0,p.jsx)(W.Z,{children:D.checkInTime&&E()(D.checkInTime).format("DD/MM/YYYY HH:mm")})},sorter:!0}],ne=[{label:"H\u1ED9i ngh\u1ECB",children:A==null?void 0:A.name},{label:"Ng\xE0y t\u1ED5 ch\u1EE9c",children:E()(A==null?void 0:A.time).format("DD/MM/YYYY HH:mm")},{label:"T\u1ED5ng tham d\u1EF1",children:J},{label:"T\u1ED5ng v\u1EAFng m\u1EB7t",children:Y-J},{label:"T\u1ED5ng kh\xE1ch m\u1EDDi",children:Y}],te=function(){var C=P()(u()().mark(function R(){var D;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(!A||!F)){w.next=3;break}return t.ZP.error("Ch\u01B0a c\xF3 d\u1EEF li\u1EC7u!"),w.abrupt("return");case 3:return D=[{column:"T\xEAn",type:String,value:function(O){var h;return(h=O.guestId)===null||h===void 0?void 0:h.fullName}},{column:"S\u1ED1 \u0110T",type:String,value:function(O){var h;return(h=O.guestId)===null||h===void 0?void 0:h.phoneNumber}},{column:"Ch\u1EE9c v\u1EE5",type:String,value:function(O){var h;return(h=O.guestId)===null||h===void 0?void 0:h.office}},{column:"\u0110\u01A1n v\u1ECB",type:String,value:function(O){var h;return(h=O.guestId)===null||h===void 0?void 0:h.workplace}},{column:"T\xECnh tr\u1EA1ng",type:String,value:function(O){var h;return(h=d.RA.find(function(re){return re.value===O.status}))===null||h===void 0?void 0:h.label}},{column:"Gi\u1EDD tham d\u1EF1",type:Date,format:"HH:mm",value:function(O){return O.checkInTime?new Date(O.checkInTime):null}},{column:"Ng\xE0y tham d\u1EF1",type:Date,format:"dd/mm/yyyy",value:function(O){return O.checkInTime?new Date(O.checkInTime):null}}],w.next=6,(0,y.Z)(F,{schema:D,fileName:"B\xE1o c\xE1o H\u1ED9i ngh\u1ECB - ".concat(A.name,".xlsx")});case 6:t.ZP.success("\u0110\xE3 l\u01B0u b\xE1o c\xE1o th\xE0nh c\xF4ng!");case 7:case"end":return w.stop()}},R)}));return function(){return C.apply(this,arguments)}}();return(0,p.jsx)(M._z,{children:(0,p.jsxs)(W.Z,{size:"large",direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(i.Z,{title:"T\u1ED5ng k\u1EBFt",bordered:!0,column:{xs:1,sm:1,md:1,lg:1,xl:2,xxl:2},items:ne}),(0,p.jsx)(U.Z,{loading:q,dataSource:F||[],columnsState:(0,r.iW)("meeting",Q,V),headerTitle:"Danh s\xE1ch",actionRef:s,rowKey:"_id",search:!1,pagination:{showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:20,pageSizeOptions:[20,50,100,200]},toolBarRender:function(){return[(0,p.jsxs)(m.ZP,{type:"primary",onClick:function(){return te()},children:[(0,p.jsx)(c.Z,{})," L\u01B0u Excel"]},"primary")]},columns:ee,rowSelection:!1})]})})};j.default=a},98169:function(x,j,e){e.d(j,{$c:function(){return m},H8:function(){return U},OD:function(){return y},RA:function(){return b},pV:function(){return W},wS:function(){return E}});var S=e(15009),u=e.n(S),L=e(97857),P=e.n(L),B=e(99289),v=e.n(B),M=e(10293),U=function(r){return r[r.UNKNOWN=0]="UNKNOWN",r[r.CHECKED_IN=1]="CHECKED_IN",r}({}),b=[{label:"Ch\u01B0a tham d\u1EF1",value:0},{label:"\u0110\xE3 tham d\u1EF1",value:1}];function W(r){return function(){var c=v()(u()().mark(function d(p,a,_){var s,o;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _=_||{},_.meetingId=r,s=P()(P()({},p),_),a&&(o=Object.entries(a)[0],o&&(s.sort=o[0],s.direction=o[1])),n.abrupt("return",(0,M.request)("/attendance",{method:"GET",params:s}));case 5:case"end":return n.stop()}},d)}));return function(d,p,a){return c.apply(this,arguments)}}()}function t(r){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function r(c){var d;return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,request("/attendance/".concat(c),{method:"GET",params:{}});case 2:return d=a.sent,a.abrupt("return",d);case 4:case"end":return a.stop()}},r)})),i.apply(this,arguments)}function m(r,c){return l.apply(this,arguments)}function l(){return l=v()(u()().mark(function r(c,d){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,M.request)("/attendance/".concat(c._id),P()({data:c,method:"PUT"},d||{})));case 1:case"end":return a.stop()}},r)})),l.apply(this,arguments)}function E(r,c){return I.apply(this,arguments)}function I(){return I=v()(u()().mark(function r(c,d){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,M.request)("/attendance",P()({data:c,method:"POST"},d||{})));case 1:case"end":return a.stop()}},r)})),I.apply(this,arguments)}function y(r,c){return T.apply(this,arguments)}function T(){return T=v()(u()().mark(function r(c,d){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,M.request)("/attendance",P()({data:c,method:"DELETE"},d||{})));case 1:case"end":return a.stop()}},r)})),T.apply(this,arguments)}},85576:function(x,j,e){e.d(j,{$Z:function(){return l},Iy:function(){return U},MB:function(){return c},Zb:function(){return I},at:function(){return T},gD:function(){return p},jx:function(){return W},vI:function(){return i}});var S=e(15009),u=e.n(S),L=e(97857),P=e.n(L),B=e(99289),v=e.n(B),M=e(10293);function U(_,s,o){return b.apply(this,arguments)}function b(){return b=v()(u()().mark(function _(s,o,g){var n,$;return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return n=P()(P()({},s),g),o&&($=Object.entries(o)[0],$&&(n.sort=$[0],n.direction=$[1])),K.abrupt("return",(0,M.request)("/meeting",{method:"GET",params:n}));case 3:case"end":return K.stop()}},_)})),b.apply(this,arguments)}function W(_){return t.apply(this,arguments)}function t(){return t=v()(u()().mark(function _(s){var o;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.request)("/meeting/".concat(s),{method:"GET",params:{}});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}},_)})),t.apply(this,arguments)}function i(_){return m.apply(this,arguments)}function m(){return m=v()(u()().mark(function _(s){var o;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.request)("/meeting/report/".concat(s),{method:"GET",params:{}});case 2:return o=n.sent,n.abrupt("return",o.data);case 4:case"end":return n.stop()}},_)})),m.apply(this,arguments)}function l(_,s){return E.apply(this,arguments)}function E(){return E=v()(u()().mark(function _(s,o){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,M.request)("/meeting/".concat(s._id),P()({data:s,method:"PUT"},o||{})));case 1:case"end":return n.stop()}},_)})),E.apply(this,arguments)}function I(_,s){return y.apply(this,arguments)}function y(){return y=v()(u()().mark(function _(s,o){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,M.request)("/meeting",P()({data:s,method:"POST"},o||{})));case 1:case"end":return n.stop()}},_)})),y.apply(this,arguments)}function T(_,s){return r.apply(this,arguments)}function r(){return r=v()(u()().mark(function _(s,o){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,M.request)("/meeting",P()({data:s,method:"DELETE"},o||{})));case 1:case"end":return n.stop()}},_)})),r.apply(this,arguments)}function c(_){return d.apply(this,arguments)}function d(){return d=v()(u()().mark(function _(s){var o;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.request)("/meeting/generate/".concat(s),{method:"GET",params:{}});case 2:return o=n.sent,n.abrupt("return",o.data);case 4:case"end":return n.stop()}},_)})),d.apply(this,arguments)}function p(){return a.apply(this,arguments)}function a(){return a=v()(u()().mark(function _(){var s;return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,M.request)("/meeting/checkin-url",{method:"GET"});case 2:return s=g.sent,g.abrupt("return",s);case 4:case"end":return g.stop()}},_)})),a.apply(this,arguments)}},20048:function(x,j,e){e.d(j,{iW:function(){return B}});var S=e(52677),u=e.n(S),L=e(5574),P=e.n(L);function B(t,i,m){return{value:i,onChange:function(E){JSON.stringify(E)!==JSON.stringify(i)&&(m(E),localStorage.setItem(t,JSON.stringify(E)))},persistenceKey:t,persistenceType:"localStorage"}}function v(t,i){return{pageSizeOptions:i,showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:parseInt(localStorage.getItem(t)||i[0].toString()),onShowSizeChange:function(l,E){localStorage.setItem(t,E.toString())}}}function M(t){for(var i={},m=0,l=Object.entries(t);m<l.length;m++){var E=_slicedToArray(l[m],2),I=E[0],y=E[1],T=I.split(".");if(T.length===1){i[I]=y;continue}for(var r=i,c=0;c<T.length-1;++c){var d=T[c];r[d]||(r[d]={}),r=r[d]}r[T[T.length-1]]=y}return i}function U(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(!t)return{};var m={};for(var l in t)_typeof(t[l])==="object"&&t[l]!==null?Object.assign(m,U(t[l],i+l+".")):m[i+l]=t[l];return m}function b(t,i){if(t=t||[],i=i||[],!(!t.length&&!i.length)){var m={};return t=t.filter(function(l){return!i.includes(l)}),t.length&&(m.disconnect=t.map(function(l){return{id:l}})),i.length&&(m.createOrConnect={product:{connect:i.map(function(l){return{id:l}}),position:0}}),m}}function W(t){return Array.isArray(t)?!t.length:t&&t.toNumber?t.toNumber()===0:!t}}}]);
